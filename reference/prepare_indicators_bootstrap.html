<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare indicators for bootstrap and cross validation — prepare_indicators_bootstrap • impIndicator</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/PT_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Prepare indicators for bootstrap and cross validation — prepare_indicators_bootstrap"><meta name="description" content="Create the parameter lists required to perform bootstrapping
(dubicube::bootstrap_cube()), calculate confidence intervals
(dubicube::calculate_bootstrap_ci()), and perform cross-validation
(dubicube::cross_validate_cube()).
This function is primarily intended for internal use by indicator
functions, but can also be used directly to construct parameter lists
for manual calls to the underlying dubicube functions.
Default bootstrap and confidence interval arguments are internally
defined and can be modified via boot_args and ci_args. User-supplied
values override defaults."><meta property="og:description" content="Create the parameter lists required to perform bootstrapping
(dubicube::bootstrap_cube()), calculate confidence intervals
(dubicube::calculate_bootstrap_ci()), and perform cross-validation
(dubicube::cross_validate_cube()).
This function is primarily intended for internal use by indicator
functions, but can also be used directly to construct parameter lists
for manual calls to the underlying dubicube functions.
Default bootstrap and confidence interval arguments are internally
defined and can be modified via boot_args and ci_args. User-supplied
values override defaults."><meta property="og:image" content="https://b-cubed-eu.github.io/impIndicator/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">impIndicator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/background.html">Background</a></li>
    <li><a class="dropdown-item" href="../articles/prepare_data.html">Prepare data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://b-cubed.eu/" aria-label="B-Cubed website"><span class="fa fa-cube"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-cubed-eu/impIndicator/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare indicators for bootstrap and cross validation</h1>
      <small class="dont-index">Source: <a href="https://github.com/b-cubed-eu/impIndicator/blob/v0.6.0/R/prepare_indicators_bootstrap.R" class="external-link"><code>R/prepare_indicators_bootstrap.R</code></a></small>
      <div class="d-none name"><code>prepare_indicators_bootstrap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create the parameter lists required to perform bootstrapping
(<code><a href="https://b-cubed-eu.github.io/dubicube/reference/bootstrap_cube.html" class="external-link">dubicube::bootstrap_cube()</a></code>), calculate confidence intervals
(<code><a href="https://b-cubed-eu.github.io/dubicube/reference/calculate_bootstrap_ci.html" class="external-link">dubicube::calculate_bootstrap_ci()</a></code>), and perform cross-validation
(<code><a href="https://b-cubed-eu.github.io/dubicube/reference/cross_validate_cube.html" class="external-link">dubicube::cross_validate_cube()</a></code>).</p>
<p>This function is primarily intended for internal use by indicator
functions, but can also be used directly to construct parameter lists
for manual calls to the underlying <code>dubicube</code> functions.</p>
<p>Default bootstrap and confidence interval arguments are internally
defined and can be modified via <code>boot_args</code> and <code>ci_args</code>. User-supplied
values override defaults.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_indicators_bootstrap</span><span class="op">(</span></span>
<span>  <span class="va">impact_cube_data</span>,</span>
<span>  indicator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overall"</span>, <span class="st">"site"</span>, <span class="st">"species"</span><span class="op">)</span>,</span>
<span>  <span class="va">indicator_method</span>,</span>
<span>  grouping_var <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  ci_type <span class="op">=</span> <span class="st">"perc"</span>,</span>
<span>  confidence_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  boot_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>samples <span class="op">=</span> <span class="fl">1000</span>, seed <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  ci_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>no_bias <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  out_var <span class="op">=</span> <span class="st">"taxonKey"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-impact-cube-data">impact_cube_data<a class="anchor" aria-label="anchor" href="#arg-impact-cube-data"></a></dt>
<dd><p>An impact cube object (class <code>"impact_cube"</code>)
created with <code><a href="create_impact_cube_data.html">create_impact_cube_data()</a></code>.</p></dd>


<dt id="arg-indicator">indicator<a class="anchor" aria-label="anchor" href="#arg-indicator"></a></dt>
<dd><p>Character string specifying the impact indicator to be
computed. Options are <code>"overall"</code>, <code>"site"</code>, and <code>"species"</code>.</p></dd>


<dt id="arg-indicator-method">indicator_method<a class="anchor" aria-label="anchor" href="#arg-indicator-method"></a></dt>
<dd><p>Character string specifying the method used to
compute the impact indicator (see methods in <code><a href="compute_impact_indicator.html">compute_impact_indicator()</a></code>).</p></dd>


<dt id="arg-grouping-var">grouping_var<a class="anchor" aria-label="anchor" href="#arg-grouping-var"></a></dt>
<dd><p>A character vector specifying the grouping variable(s)
for the bootstrap and confidence interval calculations. The function
supplied to <code><a href="https://b-cubed-eu.github.io/dubicube/reference/bootstrap_cube.html" class="external-link">bootstrap_cube()</a></code> must return one row per group. The specified
variables must not be redundant (e.g., <code>"time_point"</code> and <code>"year"</code> should
not both be used if one is simply an alternative encoding of the other).</p></dd>


<dt id="arg-ci-type">ci_type<a class="anchor" aria-label="anchor" href="#arg-ci-type"></a></dt>
<dd><p>Character string specifying the type of confidence interval
to compute. Options include:</p><ul><li><p><code>"perc"</code>: Percentile interval (default)</p></li>
<li><p><code>"bca"</code>: Bias-corrected and accelerated interval</p></li>
<li><p><code>"norm"</code>: Normal approximation interval</p></li>
<li><p><code>"basic"</code>: Basic bootstrap interval</p></li>
</ul></dd>


<dt id="arg-confidence-level">confidence_level<a class="anchor" aria-label="anchor" href="#arg-confidence-level"></a></dt>
<dd><p>Numeric value specifying the confidence level for
the intervals. Default is <code>0.95</code> (95% confidence level). This value is
passed internally as <code>conf</code> to <code><a href="https://b-cubed-eu.github.io/dubicube/reference/calculate_bootstrap_ci.html" class="external-link">calculate_bootstrap_ci()</a></code>.</p></dd>


<dt id="arg-boot-args">boot_args<a class="anchor" aria-label="anchor" href="#arg-boot-args"></a></dt>
<dd><p>Named list of additional arguments passed to
<code><a href="https://b-cubed-eu.github.io/dubicube/reference/bootstrap_cube.html" class="external-link">dubicube::bootstrap_cube()</a></code>. Defaults are:</p><dl><dt>samples</dt>
<dd><p>Number of bootstrap replicates (default <code>1000</code>).</p></dd>

<dt>seed</dt>
<dd><p>Seed for reproducibility (default <code>NA</code>, meaning no call to <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code>).</p></dd>


</dl><p>User-supplied values override these defaults. Arguments that are
internally defined in this function (e.g., <code>data_cube</code>, <code>fun</code>,
<code>indicator_method</code>, <code>grouping_var</code>, <code>processed_cube</code>, <code>method</code>)
must not be supplied via <code>boot_args</code>.</p></dd>


<dt id="arg-ci-args">ci_args<a class="anchor" aria-label="anchor" href="#arg-ci-args"></a></dt>
<dd><p>Named list of additional arguments passed to
<code><a href="https://b-cubed-eu.github.io/dubicube/reference/calculate_bootstrap_ci.html" class="external-link">dubicube::calculate_bootstrap_ci()</a></code>. Default is:</p><dl><dt>no_bias</dt>
<dd><p>Logical; if <code>TRUE</code>, intervals are centered around the
original estimates (bias is ignored).</p></dd>


</dl><p>User-supplied values override defaults. The arguments <code>grouping_var</code>,
<code>type</code>, and <code>conf</code> are controlled via <code>grouping_var</code>, <code>ci_type</code>, and
<code>confidence_level</code>, respectively, and must not be supplied via <code>ci_args</code>.</p></dd>


<dt id="arg-out-var">out_var<a class="anchor" aria-label="anchor" href="#arg-out-var"></a></dt>
<dd><p>Character string specifying the column used for
leave-one-out cross-validation. Default is <code>"taxonKey"</code>, which enables
leave-one-species-out cross-validation.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list with three components:</p><dl><dt>bootstrap_params</dt>
<dd><p>List of parameters for <code><a href="https://b-cubed-eu.github.io/dubicube/reference/bootstrap_cube.html" class="external-link">dubicube::bootstrap_cube()</a></code>.</p></dd>

<dt>ci_params</dt>
<dd><p>List of parameters for <code><a href="https://b-cubed-eu.github.io/dubicube/reference/calculate_bootstrap_ci.html" class="external-link">dubicube::calculate_bootstrap_ci()</a></code>.</p></dd>

<dt>cv_params</dt>
<dd><p>List of parameters for <code><a href="https://b-cubed-eu.github.io/dubicube/reference/cross_validate_cube.html" class="external-link">dubicube::cross_validate_cube()</a></code>.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/b-cubed-eu/b3gbi" class="external-link">b3gbi</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">acacia_cube</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://b-cubed-eu.github.io/b3gbi/reference/process_cube.html" class="external-link">process_cube</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  cube_name <span class="op">=</span> <span class="va">cube_acacia_SA</span>,</span></span>
<span class="r-in"><span>  grid_type <span class="op">=</span> <span class="st">"eqdgc"</span>,</span></span>
<span class="r-in"><span>  first_year <span class="op">=</span> <span class="fl">2010</span>,</span></span>
<span class="r-in"><span>  last_year <span class="op">=</span> <span class="fl">2024</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">impact_cube</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_impact_cube_data.html">create_impact_cube_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  cube_data <span class="op">=</span> <span class="va">acacia_cube</span>,</span></span>
<span class="r-in"><span>  impact_data <span class="op">=</span> <span class="va">eicat_acacia</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu">prepare_indicators_bootstrap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  impact_cube_data <span class="op">=</span> <span class="va">impact_cube</span>,</span></span>
<span class="r-in"><span>  indicator <span class="op">=</span> <span class="st">"overall"</span>,</span></span>
<span class="r-in"><span>  indicator_method <span class="op">=</span> <span class="st">"mean_cum"</span>,</span></span>
<span class="r-in"><span>  boot_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>samples <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ci_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>no_bias <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bootstrap</span></span></span>
<span class="r-in"><span><span class="va">bootstrap_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">dubicube</span><span class="fu">::</span><span class="va"><a href="https://b-cubed-eu.github.io/dubicube/reference/bootstrap_cube.html" class="external-link">bootstrap_cube</a></span>,</span></span>
<span class="r-in"><span>  <span class="va">params</span><span class="op">$</span><span class="va">bootstrap_params</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Confidence intervals</span></span></span>
<span class="r-in"><span><span class="va">ci_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">dubicube</span><span class="fu">::</span><span class="va"><a href="https://b-cubed-eu.github.io/dubicube/reference/calculate_bootstrap_ci.html" class="external-link">calculate_bootstrap_ci</a></span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>bootstrap_results <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">bootstrap_results</span><span class="op">)</span>, <span class="va">params</span><span class="op">$</span><span class="va">ci_params</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Cross-validation</span></span></span>
<span class="r-in"><span><span class="va">cv_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">dubicube</span><span class="fu">::</span><span class="va"><a href="https://b-cubed-eu.github.io/dubicube/reference/cross_validate_cube.html" class="external-link">cross_validate_cube</a></span>,</span></span>
<span class="r-in"><span>  <span class="va">params</span><span class="op">$</span><span class="va">cv_params</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mukhtar Muhammed Yahaya, Sabrina Kumschick, Sandra MacFadyen, Pietro Landi, Cang Hui, European Union’s Horizon Europe Research and Innovation Programme (ID No 101059592).</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

